<!-- TESTOVACÍ KOMENTÁŘ PRO GITHUB DESKTOP - změna pro ověření sledování souboru -->
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adam Hornof</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <!-- Odebrán League Spartan font -->
  <style>
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0f0f0f;
      color: #fff;
      line-height: 1.6;
    }
    header {
      padding: 4rem 2rem;
      text-align: center;
      background: linear-gradient(270deg, #00c6ff, #0072ff, #00c6ff);
      background-size: 600% 100%;
      animation: gradientShift 15s ease-in-out infinite alternate;
    }
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    header h1 {
      font-size: 3rem;
      font-weight: 800;
      font-family: 'Inter', Arial, sans-serif; /* změněno zpět na Inter */
      letter-spacing: 1px;
    }
    header p {
      font-size: 1.2rem;
      color: #e0f7ff;
      margin-top: 0.5rem;
    }
    /* nav style moved to HTML inline style */
    nav a {
      color: #00c6ff;
      text-decoration: none;
      font-weight: 600;
    }
    section {
      max-width: 800px;
      margin: 3rem auto;
      padding: 0 2rem;
    }
    section h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
      border-bottom: 2px solid #00c6ff;
      display: inline-block;
      padding-bottom: 0.3rem;
      font-family: 'Inter', Arial, sans-serif; /* změněno zpět na Inter */
      font-weight: 800;
      letter-spacing: 0.5px;
    }
    .project {
      background: #1a1a1a;
      padding: 1rem;
      border-radius: 0.75rem;
      margin-bottom: 1.5rem;
    }
    .project h3 {
      font-size: 1.3rem;
      color: #00c6ff;
    }
    footer {
      text-align: center;
      padding: 2rem;
      background-color: #121212;
      color: #aaa;
      font-size: 0.9rem;
    }
    a.button {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background: #00c6ff;
      color: #000;
      border-radius: 0.5rem;
      font-weight: 600;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    a.button:hover {
      background: #0072ff;
      color: #fff;
    }
    ul {
      padding-left: 1.5rem;
      list-style-type: disc;
    }
    
    li {
      margin-bottom: 0.5rem;
    }

#kontakt a {
  text-decoration: none;
  transition: color 0.3s ease;
}

#kontakt a:hover {
  color: #66d9ff !important;
  text-decoration: underline !important;
  cursor: pointer;
}
    .tool-icons {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-top: 1.5rem;
      text-align: center;
    }
    .tool-icons div {
      flex: 1 1 120px;
      max-width: 140px;
    }
    .tool-icons img {
      width: 48px;
      height: 48px;
      margin-bottom: 0.5rem;
    }
    .bigger-icon {
      width: 160px;
      height: 160px;
    }
  .tool-icons img:hover {
    transform: scale(1.2);
    transition: transform 0.3s ease;
  }
  .kontakt-icons {
  display: flex;
  gap: 2rem;
  justify-content: center;
  align-items: center;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}
.kontakt-icons a img {
  transition: transform 0.2s;
  border-radius: 8px;
  background: #222;
  padding: 6px;
}
.kontakt-icons a:hover img {
  transform: scale(1.2);
  background: #00c6ff;
}
.spotify-song-link {
    font-weight: bold;
    color: white;
    text-decoration: none;
    transition: color 0.2s;
  }
  .spotify-song-link:hover {
    color: #00c6ff;
    text-decoration: underline;
  }
  </style>
<!-- Google Analytics bez cookies -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XGECGL3ETS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XGECGL3ETS', {
    'anonymize_ip': true,
    'storage': 'none',
    'allow_google_signals': false,
    'allow_ad_personalization_signals': false
  });
</script>
</head>
<body>
  <header>
    <h1>Adam Hornof</h1>
    <p>Student • Tvůrce • Geek • Ecommerce • Weby</p>
  </header>
  <nav style="display: flex; justify-content: center; gap: 2rem; padding: 1rem; background-color: #121212;">
    <a href="#o-mne">O mně</a>
    <a href="#projekty">Projekty</a>
    <a href="#kontakt">Kontakt</a>
  </nav>
  <section id="o-mne" class="fade-in">
    <h2>O mně</h2>
    <p>
      Jsem Adam Hornof – <span id="age"></span>letý student a tvůrce webů, který se nebojí zkoušet nové věci.
      Věnuji se projektům, které mají smysl, od technické podpory neziskovek až po vlastní e-shopy.
      Baví mě ecommerce, technologie a čistý webový design.
    </p>
    <h2 style="margin-top:2rem;">Právě poslouchám</h2>
    <div id="spotify-widget"></div>
  </section>
  <section id="stack" class="fade-in">
    <h2>Používám</h2>
    <div class="tool-icons">
      <div>
        <img src="/icons/wordpress.svg" alt="WordPress">
        <p>WordPress</p>
      </div>
      <div>
        <img src="icons/woocommerce.svg" alt="WooCommerce" class="bigger-icon">
        <p>WooCommerce</p>
      </div>
      <div>
        <img src="icons/analytics.svg" alt="Google Analytics">
        <p>Google Analytics</p>
      </div>
      <div>
        <img src="icons/workspace.svg" alt="Google Workspace" class="bigger-icon">
        <p>Google Workspace</p>
      </div>
      <div>
        <img src="icons/figma.svg" alt="Figma">
        <p>Figma</p>
      </div>
    </div>
  </section>
  <section id="projekty" class="fade-in">
    <h2>Projekty</h2>
      <div class="project">
        <h3>QR Darovací Formulář</h3>
        <p>WordPress plugin pro neziskovky a projekty, které chtějí přijímat příspěvky pomocí QR platby. Umožňuje víc účtů, vlastní poznámky a je extrémně jednoduchý pro BFU.</p>
       <ul>
        <li>✅ Podpora více účtů a poznámek</li>
        <li>✅ Generuje QR kód přes Paylibo API</li>
        <li>✅ Proměnná <code>{{jmeno}}</code> v poznámce pro příjemce</li>
        <li>✅ Uživatelsky přívětivá administrace</li>
      </ul>
  <a class="button" href="https://github.com/adamhornofmedia/QR-Darovaci-Formular/tree/main">Zobrazit na GitHubu</a>
  <a class="button" href="https://stastny-usmev.cz/sponzorstvi-a-dary/">Plugin na webu Šťastný úsměv, z.s.</a>
</div>
    <div class="project">
      <h3>TechMerch.cz</h3>
      <p>E-shop s technologicky laděnými tričky.</p>
      <a class="button" href="https://techmerch.cz" target="_blank">Zobrazit</a>
    </div>
    <div class="project">
      <h3>Šťastný úsměv, z.s.</h3>
      <p>Pro neziskovou organizaci Šťastný úsměv, z.s. zajišťuji kompletní technickou správu – od běžné údržby webu na WordPressu až po podporu Google Workspace (e-maily, Drive, Kalendář). Pomáhám jim soustředit se na jejich činnost tím, že se starám o technické zázemí.</p>
      <ul>
        <li>✅ Nakladatelská činnost - řeším vydávání knih spolku</li>
        <li>✅ Správa WordPress webu (aktualizace, úpravy obsahu, zálohování)</li>
        <li>✅ Google Workspace – účty, DNS, e-mailová doména</li>
      </ul>
      <a class="button" href="https://stastny-usmev.cz/?adamhornof.cz" target="_blank">Zobrazit</a>
    </div>
    <div class="project">
      <h3>CovidPřehled.cz</h3>
      <p>Jednoduchý web, který během pandemie přehledně zobrazoval statistiky o COVID-19 v Česku. Nabízel upozornění na opatření přímo do telefonu a generátor čestného prohlášení pro přechod mezi okresy. Díky projektu jsem měl možnost osobně komunikovat s tehdejší předsedkyní PSP, Markétou Pekarovou Adamovou.</p>
      <ul>
        <li>✅ Sběr a aktualizace dat (MZČR a další otevřené zdroje)</li>
        <li>✅ Přehledné statistiky, upozornění a generátor pro uživatele</li>
        <li>✅ Responsivní design a jednoduché ovládání</li>
      </ul>
      <p>🗓️ Projekt běžel během let 2020–2022.</p>
    </div>
    <div class="project">
      <h3>XQE.cz – Technologický blog</h3>
      <p>Osobní blog o technologiích, digitální produktivitě a nástrojích.</p>
      <a class="button" href="https://xqe.cz/?adamhornof.cz" target="_blank">Zobrazit</a>
    </div>
    <!--
    <div class="project">
      <h3>GameSkill.eu – Herní klíče</h3>
      <p>Projektem GameSkill.eu zkouším prodej herních klíčů a bonusového obsahu. Stránka je jednoduchá, rychlá a zaměřená čistě na to, co hráče zajímá.</p>
      <ul>
        <li>✅ Přehledné UX a rychlý nákup</li>
        <li>✅ Zaměřeno na srozumitelnost bez zbytečných efektů</li>
      </ul>
      <a class="button" href="https://gameskill.eu?adamhornof.cz" target="_blank">Zobrazit</a>
    </div>
    -->
  </section>
  <section id="prave-ctu" class="fade-in">
  <h2>Právě čtu</h2>
  <div id="goodreads-widget">Načítám...</div>
</section>
  <section id="kontakt" class="fade-in">
    <h2>Kontakt</h2>
    <p>Rád si popovídám o spolupráci, nápadech i projektech. Ozvi se mi 👇</p>
    <div class="kontakt-icons">
      <a href="mailto:jsem@adamhornof.cz" title="Email" target="_blank" rel="noopener noreferrer">
        <img src="/icons/email.svg" alt="Email" width="32" height="32" />
      </a>
      <a href="https://www.linkedin.com/in/adamhornof/" title="LinkedIn" target="_blank" rel="noopener noreferrer">
        <img src="/icons/linkedin.svg" alt="LinkedIn" width="32" height="32" />
      </a>
      <a href="https://github.com/adamhornofmedia" title="GitHub" target="_blank" rel="noopener noreferrer">
        <img src="/icons/github.svg" alt="GitHub" width="32" height="32" />
      </a>
      <a href="https://www.printables.com/@adamhornof" title="Printables" target="_blank" rel="noopener noreferrer">
        <img src="/icons/printables-logo.svg" alt="Printables" width="32" height="32" />
      </a>
      <a href="https://kinobox.cz/uzivatele/209445" title="Kinobox" target="_blank" rel="noopener noreferrer">
        <img src="/icons/kinobox.svg" alt="Kinobox" width="32" height="32" />
      </a>
      <a href="https://www.goodreads.com/nejsemzpardubic" title="Goodreads" target="_blank" rel="noopener noreferrer">
        <img src="/icons/goodreads.svg" alt="Goodreads" width="32" height="32" />
      </a>
      <a href="https://m.me/adamhornof" title="Messenger" target="_blank" rel="noopener noreferrer">
        <img src="/icons/messenger.svg" alt="Messenger" width="32" height="32" />
      </a>
    </div>
    <div style="margin-top: 1rem; text-align: center;">
      <a href="mailto:jsem@adamhornof.cz" style="color: #00c6ff; font-weight: 600;">jsem@adamhornof.cz</a>
    </div>
  </section>
  <footer>
    &copy; <span id="currentYear"></span> Adam Hornof. Všechna práva vyhrazena.<br>
    IČO: 23294566<br>
    Sídlo: Nové sady 988/2, Brno, 602 00
  </footer>
  <script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // Věk podle data narození
    function calculateAge(birthDateString) {
      const today = new Date();
      const birthDate = new Date(birthDateString);
      let age = today.getFullYear() - birthDate.getFullYear();
      const m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return age;
    }

    document.getElementById('age').textContent = calculateAge('2005-10-25');


    // Fade-in animace při scrollování
    const faders = document.querySelectorAll('.fade-in');

    const appearOnScroll = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      },
      {
        threshold: 0.1
      }
    );

    faders.forEach(fader => {
      appearOnScroll.observe(fader);
    });

    // Spotify widget
    let lastTrackId = null;
  let trackEndTimestamp = null;
  let lastSongData = null;
  let apiInterval = null;

  async function loadNowPlaying() {
    const res = await fetch("https://adamhornofmedia-github-io.vercel.app/api/spotify");
    const data = await res.json();

    const widget = document.getElementById("spotify-widget");

    if (!data || !data.item) {
      widget.innerHTML = `
        <div style="display:flex;align-items:center;gap:10px;">
          <img src="/icons/spotify.svg" alt="Spotify" style="width:48px;height:48px;">
          <div style="color:#aaa;">Aktuálně nic neposlouchám</div>
        </div>
      `;
      lastTrackId = null;
      trackEndTimestamp = null;
      lastSongData = null;

      // Pokud nic nehraje, obnovuj API každou minutu
      if (!apiInterval) {
        apiInterval = setInterval(loadNowPlaying, 60000);
      }
      return;
    }

    // Pokud něco hraje, zruš interval pro obnovu API
    if (apiInterval) {
      clearInterval(apiInterval);
      apiInterval = null;
    }

    const song = data.item.name;
    const artist = data.item.artists.map(a => a.name).join(", ");
    const img = data.item.album.images[0].url;
    const link = data.item.external_urls.spotify;
    const trackId = data.item.id;
    const progressMs = data.progress_ms;
    const durationMs = data.item.duration_ms;
    const isPlaying = data.is_playing; // <-- důležité!

    lastSongData = { song, artist, img, link, durationMs, progressMs, isPlaying };

    // Pokud je nová skladba, nastav trackEndTimestamp
    if (trackId !== lastTrackId) {
      lastTrackId = trackId;
      trackEndTimestamp = Date.now() + (durationMs - progressMs);
    }

    let remainingMs, playedMs, progressWidth;
    if (isPlaying) {
      remainingMs = trackEndTimestamp - Date.now();
      if (remainingMs < 0) remainingMs = 0;
      playedMs = durationMs - remainingMs;
    } else {
      playedMs = progressMs;
      remainingMs = durationMs - playedMs;
    }
    progressWidth = Math.round(playedMs / durationMs * 180);

    const min = Math.floor(remainingMs / 60000);
    const sec = String(Math.floor((remainingMs % 60000) / 1000)).padStart(2, '0');

    widget.innerHTML = `
      <div style="display:flex;align-items:center;gap:10px;">
        <img src="${img}" alt="Album cover" style="width:64px;height:64px;">
        <div>
          <a href="${link}" target="_blank" class="spotify-song-link">
            ${song}
          </a>
          <div>${artist}</div>
          <div style="margin-top:8px;">
            <div class="spotify-progress-bar" style="background:#222; border-radius:4px; height:8px; width:180px; position:relative;">
              <div class="spotify-progress" style="background:#00c6ff; height:8px; border-radius:4px; width:${progressWidth}px;"></div>
            </div>
            <div class="spotify-remaining" style="font-size:0.9em; color:#aaa; margin-top:2px;">
              Zbývá ${min}:${sec} min
            </div>
            ${!isPlaying ? '<div style="color:#00c6ff; font-size:0.9em; margin-top:2px;">Pozastaveno</div>' : ''}
          </div>
        </div>
      </div>
    `;
  }

  // První načtení dat ze Spotify
  loadNowPlaying();

  // Každou sekundu dopočítáváme progress bar a čas, API voláme jen při nové písni nebo když nic nehraje
  setInterval(() => {
    const widget = document.getElementById("spotify-widget");
    if (lastTrackId && lastSongData && trackEndTimestamp) {
      let remainingMs, playedMs, progressWidth;
      if (lastSongData.isPlaying) {
        remainingMs = trackEndTimestamp - Date.now();
        if (remainingMs < 0) remainingMs = 0;
        playedMs = lastSongData.durationMs - remainingMs;
      } else {
        playedMs = lastSongData.progressMs;
        remainingMs = lastSongData.durationMs - playedMs;
      }
      progressWidth = Math.round(playedMs / lastSongData.durationMs * 180);

      const min = Math.floor(remainingMs / 60000);
      const sec = String(Math.floor((remainingMs % 60000) / 1000)).padStart(2, '0');

      const progressBar = widget.querySelector('.spotify-progress');
      if (progressBar) progressBar.style.width = `${progressWidth}px`;
      const timeDiv = widget.querySelector('.spotify-remaining');
      if (timeDiv) timeDiv.textContent = `Zbývá ${min}:${sec} min`;

      // Pozastaveno info
      const pausedDiv = widget.querySelector('.spotify-paused');
      if (pausedDiv) {
        pausedDiv.style.display = lastSongData.isPlaying ? 'none' : 'block';
      }

      // Pokud skladba doběhla, načti znovu z API
      if (remainingMs === 0) {
        loadNowPlaying();
      }
    }
  }, 1000);

  async function loadCurrentlyReading() {
    const url = "https://adamhornofmedia-github-io.vercel.app/api/goodreads"; // tvůj Vercel endpoint
    try {
      const res = await fetch(url);
      const xml = await res.text();

      // Parse XML
      const parser = new DOMParser();
      const doc = parser.parseFromString(xml, "application/xml");
      const items = Array.from(doc.querySelectorAll("item"));

      const widget = document.getElementById("goodreads-widget");
      if (items.length === 0) {
        widget.innerHTML = "Momentálně nečtu žádnou knihu.";
        return;
      }

      // Filtrovat knihy, které mají v <description> "read at:" prázdné
      const currentlyReading = items.filter(item => {
        const desc = item.querySelector("description")?.textContent || "";
        const readAtMatch = desc.match(/read at:\s*([^<\n\r]*)/i);
        return readAtMatch && readAtMatch[1].trim() === "";
      });

      if (currentlyReading.length === 0) {
        widget.innerHTML = "Momentálně nečtu žádnou knihu.";
        return;
      }

      widget.innerHTML = currentlyReading.map(item => {
        const desc = item.querySelector("description")?.textContent || "";
        // Vyparsuj autora
        let author = "";
        const authorMatch = desc.match(/author:\s*([^<\n\r]+)/i);
        if (authorMatch) author = authorMatch[1].trim();
        // Vyparsuj obálku knihy
        let cover = "";
        const imgMatch = desc.match(/<img[^>]+src="([^"]+)"[^>]*>/i);
        if (imgMatch) cover = imgMatch[1];
        // Název knihy
        const title = item.querySelector("title")?.textContent || "";
        // Odkaz na knihu
        const link = item.querySelector("link")?.textContent || "#";
        return `
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:1rem;">
            <img src="${cover}" alt="${title}" style="width:48px;height:70px;object-fit:cover;border-radius:6px;">
            <div>
              <a href="${link}" target="_blank" style="color:#00c6ff;font-weight:600;text-decoration:none;">${title}</a>
              <div style="color:#aaa;font-size:0.95em;">${author}</div>
            </div>
          </div>
        `;
      }).join('');
    } catch (e) {
      document.getElementById("goodreads-widget").innerHTML = "Nelze načíst knihy.";
    }
  }
  loadCurrentlyReading();
</script>
</body>
</html>
